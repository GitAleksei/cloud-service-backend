# Дипломная работа “Облачное хранилище”
[Английский язык](README.md)
## Описание проекта

Данное приложение является back-end частью REST-сервиса. Сервис предоставляет REST интерфейс для
возможности
загрузки файлов и вывода списка уже загруженных файлов пользователя. Все запросы к сервису
авторизованы. Заранее подготовленное
[веб-приложение (FRONT)](https://github.com/netology-code/jd-homeworks/tree/master/diploma/netology-diplom-frontend) подключается к
разработанному BACK сервису без доработок, а также используется функционал FRONT для авторизации,
загрузки и вывода списка файлов пользователя.

## Запуск

Приложение запускается командой `docker-compose up`. Но для начала нужно получить образы
front, mysql и back.

**mysql**: Качаем образ с помощью команды `docker pull mysql`

**back**: С помощью [Dockerfile](Dockerfile) и команды `docker build -t back .`, создаем образ
back

**front**: Нужно добавить Dockerfile в корень проекта с приложением FRONT. Далее прописать команду
`docker build -t front .`. Ниже содержание Dockerfile:
```Dockerfile
FROM node:12
COPY . .
EXPOSE 8080
CMD [ "npm", "run", "serve" ]
```
Приложение работает по адресу [http://localhost:8080](http://localhost:8080).

## Работа приложения

Приложение реализовано с помощью фреймворка Spring.

- Сервис выполняет все методы описанные в
  [yaml файле](https://github.com/netology-code/jd-homeworks/blob/master/diploma/CloudServiceSpecification.yaml):
    1. Вывод списка файлов
    2. Добавление файла
    3. Удаление файла
    4. Авторизация
- Информация о пользователях сервиса (логины для авторизации) хранится в базе данных MySQL
- Журналирование ведется в cloud.log

После команды `docker-compose up`, сервис начинает работать по адресу
[http://localhost:8080](http://localhost:8080). Вас первым делом перенаправит на страницу с вводом
почты и пароля.

Все пользователи и их роли хранятся в БД. Прописываются они при первом запуске с помощью
**liquibase**. Пароли зашифрованы BCryptPasswordEncoder. Тестовый пользователь:
login = lev@mail.ru, password = 1234. Логин и пароль проверяются на стороне BACK. При успешном
прохождении проверки, обратно отправляется сконфигурированный **JsonWebToken** и сохраняется на
BACK
([требования задания](https://github.com/netology-code/jd-homeworks/blob/master/diploma/cloudservice.md)).
Все дальнейшие запросы производятся с этим токеном в Header auth-token. После логаута, токен удаляется.

Файлы, как и пользователи, хранятся в БД MySQL. 